"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[373],{15373:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var r,a=t(25571),o=t(78464),u=t(39917),i=t(41004),l=t(47476),c=t(74812),s=t(72905);function f(e){return e.output_type}function d(e){return e.inputs.length?"\ninterface input {\n".concat(e.inputs.map((function(e){return"    ".concat(e.key,": ").concat(e.type,";\n")})).reduce((function(e,n){return"".concat(e).concat(n)}),""),"}\n"):"\ninterface input {}\n"}function p(e){var n='            key: "'.concat(e.key,'",\n            type: "').concat(e.type,'",\n            label: "').concat(e.label,'",\n            default: ').concat(JSON.stringify(e.default),",");return"number"!==e.type&&"integer"!==e.type||(n+="\n            min: ".concat(e.min,",\n            max: ").concat(e.max,",")),"        {\n".concat(n,"\n        },")}function b(e){if(e.inputs.length){var n=1===e.inputs.length?e.inputs[0].key:e.inputs.map((function(e){return e.key})).reduce((function(e,n){return"".concat(e,", ").concat(n)}));return"const { ".concat(n," } = inputs;\n    ")}return""}function y(e){if(!e.inputs.length)return"[]";var n=e.inputs.map(p).reduce((function(e,n){return"".concat(e,"\n").concat(n)}),"");return"[".concat(n,"\n    ]")}var m,g,h,v,x=function(e){return function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var o="";return n.forEach((function(n,t){var a=r[t];o+=n+("undefined"===typeof a?"":a(e))})),o}(r||(r=(0,l.Z)(['import { register } from "../register";\n',"\nfunction effect(this: any, input: input, globals: globals): "," {\n    ",'// Your code goes here...\n}\n\nregister({\n    /* Effect Name */\n    name: "','",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: ',',\n    /* Effect Output Type */\n    output: "','"\n});\n'])),d,f,b,(function(e){return e.effectName}),y,f)},k=t(26494),j=t(86776),w=t(55977),Z=t(26975),C=t(67495),S=t(47102),A=t(62839),E=t(8680),B=t(9812),I=t(38639),M={button:"Button",boolean:"Boolean",integer:"Integer",number:"Number",rgb:"Color",rgbw:"RGB+W","rgb[]":"Color Array","rgbw[]":"RGB+W Array","number[]":"W Array"},_=Object.keys(M).map((function(e){return{key:e,text:M[e]}})),D={fieldGroup:{width:"10rem"}},R={fieldGroup:{width:"6rem"}},G={fieldGroup:{width:"3rem"}},N=s.ZP.div(m||(m=(0,l.Z)(["\n    display: flex;\n    flex-direction: row;\n    gap: 10px;\n    padding: 0 10px 10px 10px;\n"]))),T=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,U=function(e){var n=e.label,t=e.value,r=e.set_value,a=e.styles,o=e.type,u=e.min,l=e.max,s=(0,c.useState)(),f=(0,i.Z)(s,2),d=f[0],p=f[1],b=(0,c.useCallback)((function(e,n){"undefined"!==typeof n&&r(n)}),[r]);return(0,c.useEffect)((function(){"undefined"!==typeof t?t?"number"!==o||S.EU.test(t)?"integer"!==o||S.I7.test(t)?p("undefined"!==typeof u&&u>+t?"minimum: ".concat(u):"undefined"!==typeof l&&l<+t?"maximum: ".concat(l):void 0):p("not an integer"):p("not a number"):p("empty"):p(void 0)}),[t,p,o,u,l]),(0,I.jsx)(j.n,{label:n,value:t,onChange:b,styles:a,errorMessage:d})},W=function(e){var n=e.input,t=e.onChange,r=e.onRemove,a=e.onActivate,o=e.onUp,u=e.onDown,l=(0,c.useState)(n),s=(0,i.Z)(l,2),f=s[0],d=s[1],p=(0,c.useState)(n?n.type:"rgb"),b=(0,i.Z)(p,2),y=b[0],m=b[1],g=(0,c.useState)(n?n.key:""),h=(0,i.Z)(g,2),v=h[0],x=h[1],S=(0,c.useState)(""),M=(0,i.Z)(S,2),W=M[0],O=M[1],P=(0,c.useState)(n?n.label:""),L=(0,i.Z)(P,2),q=L[0],F=L[1],J=(0,c.useState)(!1),K=(0,i.Z)(J,2),Y=K[0],$=K[1],z=(0,c.useState)(n&&"rgb"===n.type?n.default:[0,0,255]),H=(0,i.Z)(z,2),X=H[0],Q=H[1],V=(0,c.useState)([[0,0,255],[0,255,255],[100,0,255]]),ee=(0,i.Z)(V,2),ne=ee[0],te=ee[1],re=(0,c.useState)("My Button"),ae=(0,i.Z)(re,2),oe=ae[0],ue=ae[1],ie=(0,c.useState)("5"),le=(0,i.Z)(ie,2),ce=le[0],se=le[1],fe=(0,c.useState)("1"),de=(0,i.Z)(fe,2),pe=de[0],be=de[1],ye=(0,c.useState)("10"),me=(0,i.Z)(ye,2),ge=me[0],he=me[1],ve=[0,0,255,127],xe=[[0,0,255,0],[0,255,255,127],[100,0,255,255]],ke=[0,63,127,191,255],je=(0,c.useRef)({onChange:t,onRemove:r,onActivate:a,onUp:o,onDown:u});return je.current={onChange:t,onRemove:r,onActivate:a,onUp:o,onDown:u},(0,c.useEffect)((function(){if(n!==f&&"undefined"!==typeof n)switch(x(n.key),m(n.type),F(n.label),n.type){case"boolean":$(n.default);break;case"rgb":Q(n.default);break;case"rgb[]":te(n.default);break;case"number[]":case"rgbw":case"rgbw[]":case"button":break;case"integer":case"number":se(n.default.toString()),be(n.min.toString()),he(n.max.toString());break;default:var e=n;console.log(e)}}),[n,f]),(0,c.useEffect)((function(){var e;switch(y){case"rgbw":e={type:y,key:v,label:q,default:ve};break;case"rgbw[]":e={type:y,key:v,label:q,default:xe};break;case"number[]":e={type:y,key:v,label:q,default:ke};break;case"number":case"integer":if(!ce||!pe||!ge)break;e={type:y,key:v,label:q,default:+ce,min:+pe,max:+ge};break;case"boolean":if("undefined"===typeof Y)break;e={type:y,key:v,label:q,default:Y};break;case"button":e={type:y,key:v,label:q,default:oe};break;case"rgb":e={type:y,key:v,label:q,default:X};break;case"rgb[]":e={type:y,key:v,label:q,default:ne};break;default:var n=y;console.log(n)}"undefined"!==typeof e&&(d(e),je.current.onChange(e))}),[y,v,q,Y,X,ne,ce,pe,ge,oe]),(0,c.useEffect)((function(){"undefined"!==typeof v?v?T.test(v)?(0,E.check)(v,6)?O("reserved word"):O(void 0):O("not a valid JS identifier"):O("empty"):O(void 0)}),[v,O]),(0,I.jsxs)(N,{onClick:a,children:[(0,I.jsx)(k.L,{placeholder:"Select...",label:"Input Type",options:_,styles:{dropdown:{width:110}},selectedKey:y,onChange:function(e,n,t){n&&m(n.key)}}),(0,I.jsx)(j.n,{label:"Input Label",value:q,onChange:function(e,n){return F(n||"")},styles:D}),(0,I.jsx)(j.n,{label:"Key",value:v,onChange:function(e,n){return x(n||"")},styles:R,errorMessage:W}),y&&"rgb"===y&&(0,I.jsxs)("div",{children:[(0,I.jsx)(w._,{children:"Default"}),(0,I.jsx)(C.Il,{color:X})]}),y&&"rgb[]"===y&&(0,I.jsxs)("div",{children:[(0,I.jsx)(w._,{children:"Default"}),(0,I.jsx)(C.B0,{colors:ne})]}),y&&"boolean"===y&&(0,I.jsx)(Z.Z,{label:"Default",checked:Y,onChange:function(e,n){"undefined"!==typeof n&&$(n)}}),y&&"button"===y&&(0,I.jsx)(j.n,{label:"Button Label",value:oe,onChange:function(e,n){return n&&ue(n)},styles:R,errorMessage:W}),("integer"===y||"number"===y)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(U,{label:"Default",value:ce,set_value:se,type:y,styles:G}),(0,I.jsx)(U,{label:"Minimum",value:pe,max:"undefined"===typeof ge?ge:+ge,set_value:be,type:y,styles:G}),(0,I.jsx)(U,{label:"Maximum",value:ge,min:"undefined"===typeof pe?pe:+pe,set_value:he,type:y,styles:G})]}),(0,I.jsx)("div",{style:{margin:"auto"}}),(0,I.jsx)(A.h,{buttonStyle:{marginTop:"2rem"},title:"Move Up",icon:B.mTx,onClick:je.current.onUp}),(0,I.jsx)(A.h,{buttonStyle:{marginTop:"2rem"},title:"Move Down",icon:B.ptq,onClick:je.current.onDown}),(0,I.jsx)(A.h,{buttonStyle:{marginTop:"2rem"},title:"Remove Input",icon:B.NBC,onClick:je.current.onRemove})]})},O=t(67872),P=(t(64906),{button:"Button",boolean:"Boolean",integer:"Integer",number:"Number","number[]":"W Array",rgb:"Color","rgb[]":"Color Array","rgbw[]":"RGB+W Array"}),L=["boolean","integer","number","number[]","rgb","rgb[]","rgbw[]"].map((function(e){return{key:e,text:P[e]}})),q={dropdown:{width:110}},F=function(e){var n=e.value,t=e.onChange,r=e.placeholder,a=e.label,o=(0,c.useState)(n||"rgb[]"),u=(0,i.Z)(o,2),l=u[0],s=u[1];return(0,c.useEffect)((function(){return s(n)}),[n]),(0,c.useEffect)((function(){l&&t(l)}),[t,l]),(0,I.jsx)(k.L,{placeholder:r||"Select...",label:a,options:L,styles:q,selectedKey:l,onChange:function(e,n){n&&s(n.key)}})},J=t(52470),K=t.n(J),Y=t(15045),$=t(50488),z=t(14937),H=t(9713),X={fieldGroup:{width:"15rem"}},Q=s.ZP.div(g||(g=(0,l.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: end;\n    gap: 10px;\n"]))),V=s.ZP.div(h||(h=(0,l.Z)(["\n    display: flex;\n    flex-direction: row;\n    height: 100%;\n"]))),ee=s.ZP.div(v||(v=(0,l.Z)(["\n    min-width: 20rem;\n    max-width: 20rem;\n    padding: .8rem;\n"]))),ne=function(e){var n=e.code,t=(0,c.useMemo)((function(){return[$.Xy,z.vk,(0,H.eJ)({typescript:!0})]}),[]),r=(0,c.useState)(n),a=(0,i.Z)(r,2),o=(a[0],a[1]);return(0,I.jsx)("div",{style:{maxWidth:1e3},children:(0,I.jsx)(Y.Z,{value:n,onUpdate:function(e){e.docChanged&&o(e.state.doc.toString())},extensions:t})})},te=0;var re=function(){var e,n,t,r,l=(0,c.useState)("My Awesome Effect"),s=(0,i.Z)(l,2),f=s[0],d=s[1],p=(0,c.useState)(""),b=(0,i.Z)(p,2),y=b[0],m=b[1],g=(0,c.useState)([]),h=(0,i.Z)(g,2),v=h[0],k=h[1],w=(0,c.useState)("rgb[]"),Z=(0,i.Z)(w,2),S=Z[0],A=Z[1],E=(0,c.useState)(0),B=(0,i.Z)(E,2),M=B[0],_=B[1],D=(0,c.useState)([]),R=(0,i.Z)(D,2),G=R[0],N=R[1],T=function(e,n){var t=(0,o.Z)(v);t[n]=e,k(t)};return(0,c.useEffect)((function(){if(!f)return m("// Your effect needs a name");if(!S)return m("// Please pick an output type");if(!v.every((function(e){return"undefined"!==typeof e})))return m("// One of the Inputs needs attention");try{var e=x({effectName:f,inputs:v,output_type:S});m(e)}catch(n){m("Something went wrong: ".concat(n.message))}N(function(e){var t,r=[],a=new Set,o=new Set,i=(0,u.Z)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value;a.has(l.key)&&r.push('keys must be unique but "'.concat(l.key,'" appears more than once')),o.has(l.label)&&r.push('labels must be unique but "'.concat(l.label,'" appears more than once')),o.add(l.label),a.add(l.key)}}catch(n){i.e(n)}finally{i.f()}return r}(v))}),[v,f,S]),(0,I.jsx)("div",{style:{width:"100%",maxWidth:1200,margin:"auto"},children:(0,I.jsxs)(V,{children:[(0,I.jsxs)("div",{style:{margin:15,flexGrow:1},children:[(0,I.jsxs)(Q,{children:[(0,I.jsx)(F,{label:"Output Type",onChange:A}),(0,I.jsx)(j.n,{label:"Name",value:f,onChange:function(e,n){return n&&d(n)},styles:X})]}),(0,I.jsxs)(Q,{style:{justifyContent:"space-between",margin:"1.5rem 8px .7rem"},children:[(0,I.jsx)("h2",{children:"Inputs"}),(0,I.jsx)(O.a,{style:{alignSelf:"flex-start"},onClick:function(){return k([].concat((0,o.Z)(v),[{type:"rgb",default:[0,0,255],label:"My Color ".concat(te),key:"input_".concat(te++)}]))},children:"Add Input"})]}),v.map((function(e,n){return(0,I.jsx)("div",{style:{backgroundColor:n%2===1?"none":"#dddddd",border:"1px black"},children:(0,I.jsx)(W,{input:e,onChange:function(e){return T(e,n)},onRemove:function(){return function(e){k([].concat((0,o.Z)(v.slice(0,e)),(0,o.Z)(v.slice(e+1))))}(n)},onActivate:function(){return _(n)},onUp:function(){return function(e){if(0!==e){var n=Array.from(v);n.splice(e,1),n.splice(e-1,0,v[e]),k(n)}}(n)},onDown:function(){return function(e){if(e!==v.length-1){var n=Array.from(v);n.splice(e,1),n.splice(e+1,0,v[e]),k(n)}}(n)}})},n)})),G.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("h3",{style:{color:"red"},children:"Errors:"}),(0,I.jsx)("ul",{children:G.map((function(e,n){return(0,I.jsx)("li",{style:{color:"red"},children:e},n)}))})]}),(0,I.jsxs)(Q,{style:{justifyContent:"space-between",margin:"1.5rem 8px .7rem"},children:[(0,I.jsx)("h3",{children:"Code Template"}),(0,I.jsx)(O.a,{onClick:function(){return K()(y)},children:"Copy to Clipboard"})]}),(0,I.jsx)(ne,{code:y})]}),(0,I.jsxs)(ee,{children:["rgb"===(null===(e=v[M])||void 0===e?void 0:e.type)&&(0,I.jsx)(C.Yd,{color:null===(n=v[M])||void 0===n?void 0:n.default,onChange:function(e){T((0,a.Z)((0,a.Z)({},v[M]),{},{default:e}),M)}}),"rgb[]"===(null===(t=v[M])||void 0===t?void 0:t.type)&&(0,I.jsx)(C.Ht,{colors:null===(r=v[M])||void 0===r?void 0:r.default,onChange:function(e){T((0,a.Z)((0,a.Z)({},v[M]),{},{default:e}),M)}})]})]})})}},64906:function(e,n){}}]);
//# sourceMappingURL=373.209297f1.chunk.js.map