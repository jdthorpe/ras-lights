"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[373],{15373:function(e,n,t){t.r(n),t.d(n,{default:function(){return te}});var r,a=t(25571),o=t(78464),u=t(41004),i=t(39917),l=t(47476),c=t(74812),s=t(72905);function f(e){return e.output_type}function d(e){return e.inputs.length?"\ninterface input {\n".concat(e.inputs.map((function(e){return"    ".concat(e.key,": ").concat(e.type,";\n")})).reduce((function(e,n){return"".concat(e).concat(n)}),""),"}\n"):"\ninterface input {}\n"}function p(e){var n='            key: "'.concat(e.key,'",\n            type: "').concat(e.type,'",\n            label: "').concat(e.label,'",\n            default: ').concat(JSON.stringify(e.default),",");return"number"!==e.type&&"integer"!==e.type||(n+="\n            min: ".concat(e.min,",\n            max: ").concat(e.max,",")),"        {\n".concat(n,"\n        },")}function b(e){if(e.inputs.length){var n=1===e.inputs.length?e.inputs[0].key:e.inputs.map((function(e){return e.key})).reduce((function(e,n){return"".concat(e,", ").concat(n)}));return"const { ".concat(n," } = inputs;\n    ")}return""}function y(e){if(!e.inputs.length)return"[]";var n=e.inputs.map(p).reduce((function(e,n){return"".concat(e,"\n").concat(n)}),"");return"[".concat(n,"\n    ]")}var g,h,m,v,x,k=function(e){return function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var o="";return n.forEach((function(n,t){var a=r[t];o+=n+("undefined"===typeof a?"":a(e))})),o}(r||(r=(0,l.Z)(['import { register } from "../register";\n',"\nfunction effect(this: any, input: input, globals: globals): "," {\n    ",'// Your code goes here...\n}\n\nregister({\n    /* Effect Name */\n    name: "','",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: ',',\n    /* Effect Output Type */\n    output: "','"\n});\n'])),d,f,b,(function(e){return e.effectName}),y,f)},j=t(26494),Z=t(86776),w=t(55977),C=t(26975),S=t(67495),A=t(47102),E=t(62839),B=t(8680),I=t(9812),R=t(38639),_={button:"Button",boolean:"Boolean",integer:"Integer",number:"Number",rgb:"Color",rgbw:"RGB+W","rgb[]":"Color Array","rgbw[]":"RGB+W Array","number[]":"W Array"},D=Object.keys(_).map((function(e){return{key:e,text:_[e]}})),M={fieldGroup:{width:"10rem"}},N={fieldGroup:{width:"6rem"}},G={fieldGroup:{width:"3rem"}},U=s.ZP.div(g||(g=(0,l.Z)(["\n    display: flex;\n    flex-direction: row;\n    border-radius: 4px;\n    gap: 10px;\n    padding: 0 10px 10px 10px;\n"]))),L=s.ZP.div(h||(h=(0,l.Z)(["\n    padding-top: 1.4rem;\n    align-self: center;\n"]))),P=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,T=function(e){var n=e.label,t=e.value,r=e.set_value,a=e.styles,o=e.type,i=e.min,l=e.max,s=(0,c.useState)(),f=(0,u.Z)(s,2),d=f[0],p=f[1],b=(0,c.useCallback)((function(e,n){"undefined"!==typeof n&&r(n)}),[r]);return(0,c.useEffect)((function(){"undefined"!==typeof t?t?"number"!==o||A.EU.test(t)?"integer"!==o||A.I7.test(t)?p("undefined"!==typeof i&&i>+t?"minimum: ".concat(i):"undefined"!==typeof l&&l<+t?"maximum: ".concat(l):void 0):p("not an integer"):p("not a number"):p("empty"):p(void 0)}),[t,p,o,i,l]),(0,R.jsx)(Z.n,{label:n,value:t,onChange:b,styles:a,errorMessage:d})},W=function(e){var n=e.input,t=e.onChange,r=e.onRemove,a=e.onActivate,o=e.onUp,i=e.onDown,l=(0,c.useState)(n),s=(0,u.Z)(l,2),f=s[0],d=s[1],p=(0,c.useState)(n?n.type:"rgb"),b=(0,u.Z)(p,2),y=b[0],g=b[1],h=(0,c.useState)(n?n.key:""),m=(0,u.Z)(h,2),v=m[0],x=m[1],k=(0,c.useState)(""),A=(0,u.Z)(k,2),_=A[0],W=A[1],O=(0,c.useState)(n?n.label:""),q=(0,u.Z)(O,2),F=q[0],K=q[1],Y=(0,c.useState)(!1),$=(0,u.Z)(Y,2),z=$[0],J=$[1],H=(0,c.useState)(n&&"rgb"===n.type?n.default:[0,0,255]),Q=(0,u.Z)(H,2),V=Q[0],X=Q[1],ee=(0,c.useState)([[0,0,255],[0,255,255],[100,0,255]]),ne=(0,u.Z)(ee,2),te=ne[0],re=ne[1],ae=(0,c.useState)("My Button"),oe=(0,u.Z)(ae,2),ue=oe[0],ie=oe[1],le=(0,c.useState)("5"),ce=(0,u.Z)(le,2),se=ce[0],fe=ce[1],de=(0,c.useState)("1"),pe=(0,u.Z)(de,2),be=pe[0],ye=pe[1],ge=(0,c.useState)("10"),he=(0,u.Z)(ge,2),me=he[0],ve=he[1],xe=(0,c.useState)([0,0,255,127]),ke=(0,u.Z)(xe,1)[0],je=(0,c.useState)([[0,0,255,0],[0,255,255,127],[100,0,255,255]]),Ze=(0,u.Z)(je,1)[0],we=(0,c.useState)([0,63,127,191,255]),Ce=(0,u.Z)(we,1)[0],Se=(0,c.useRef)({onChange:t,onRemove:r,onActivate:a,onUp:o,onDown:i});return Se.current={onChange:t,onRemove:r,onActivate:a,onUp:o,onDown:i},(0,c.useEffect)((function(){if(n!==f&&"undefined"!==typeof n)switch(x(n.key),g(n.type),K(n.label),n.type){case"boolean":J(n.default);break;case"rgb":X(n.default);break;case"rgb[]":re(n.default);break;case"number[]":case"rgbw":case"rgbw[]":case"button":break;case"integer":case"number":fe(n.default.toString()),ye(n.min.toString()),ve(n.max.toString());break;default:var e=n;console.log(e)}}),[n,f]),(0,c.useEffect)((function(){var e;switch(y){case"rgbw":e={type:y,key:v,label:F,default:ke};break;case"rgbw[]":e={type:y,key:v,label:F,default:Ze};break;case"number[]":e={type:y,key:v,label:F,default:Ce};break;case"number":case"integer":if(!se||!be||!me)break;e={type:y,key:v,label:F,default:+se,min:+be,max:+me};break;case"boolean":if("undefined"===typeof z)break;e={type:y,key:v,label:F,default:z};break;case"button":e={type:y,key:v,label:F,default:ue};break;case"rgb":e={type:y,key:v,label:F,default:V};break;case"rgb[]":e={type:y,key:v,label:F,default:te};break;default:var n=y;console.log(n)}"undefined"!==typeof e&&(d(e),Se.current.onChange(e))}),[y,v,F,z,V,te,se,be,me,ue,ke,Ze,Ce]),(0,c.useEffect)((function(){"undefined"!==typeof v?v?P.test(v)?(0,B.check)(v,6)?W("reserved word"):W(void 0):W("not a valid JS identifier"):W("empty"):W(void 0)}),[v,W]),(0,R.jsxs)(U,{onClick:a,children:[(0,R.jsx)(j.L,{placeholder:"Select...",label:"Input Type",options:D,styles:{dropdown:{width:110}},selectedKey:y,onChange:function(e,n,t){n&&g(n.key)}}),(0,R.jsx)(Z.n,{label:"Input Label",value:F,onChange:function(e,n){return K(n||"")},styles:M}),(0,R.jsx)(Z.n,{label:"Key",value:v,onChange:function(e,n){return x(n||"")},styles:N,errorMessage:_}),y&&"rgb"===y&&(0,R.jsxs)("div",{children:[(0,R.jsx)(w._,{children:"Default"}),(0,R.jsx)(S.Il,{color:V})]}),y&&"rgb[]"===y&&(0,R.jsxs)("div",{children:[(0,R.jsx)(w._,{children:"Default"}),(0,R.jsx)(S.B0,{colors:te})]}),y&&"boolean"===y&&(0,R.jsx)(C.Z,{label:"Default",checked:z,onChange:function(e,n){"undefined"!==typeof n&&J(n)}}),y&&"button"===y&&(0,R.jsx)(Z.n,{label:"Button Label",value:ue,onChange:function(e,n){return n&&ie(n)},styles:N,errorMessage:_}),("integer"===y||"number"===y)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(T,{label:"Default",value:se,set_value:fe,type:y,styles:G}),(0,R.jsx)(T,{label:"Minimum",value:be,max:"undefined"===typeof me?me:+me,set_value:ye,type:y,styles:G}),(0,R.jsx)(T,{label:"Maximum",value:me,min:"undefined"===typeof be?be:+be,set_value:ve,type:y,styles:G})]}),(0,R.jsx)(L,{style:{marginLeft:"auto"},children:(0,R.jsx)(E.h,{title:"Move Up",icon:I.mTx,onClick:Se.current.onUp})}),(0,R.jsx)(L,{children:(0,R.jsx)(E.h,{title:"Move Down",icon:I.ptq,onClick:Se.current.onDown})}),(0,R.jsx)(L,{children:(0,R.jsx)(E.h,{title:"Remove Input",icon:I.NBC,onClick:Se.current.onRemove})})]})},O=t(67872),q=(t(64906),{button:"Button",boolean:"Boolean",integer:"Integer",number:"Number","number[]":"W Array",rgb:"Color","rgb[]":"Color Array","rgbw[]":"RGB+W Array"}),F=["boolean","integer","number","number[]","rgb","rgb[]","rgbw[]"].map((function(e){return{key:e,text:q[e]}})),K={dropdown:{width:110}},Y=function(e){var n=e.value,t=e.onChange,r=e.placeholder,a=e.label,o=(0,c.useState)(n||"rgb[]"),i=(0,u.Z)(o,2),l=i[0],s=i[1];return(0,c.useEffect)((function(){return s(n)}),[n]),(0,c.useEffect)((function(){l&&t(l)}),[t,l]),(0,R.jsx)(j.L,{placeholder:r||"Select...",label:a,options:F,styles:K,selectedKey:l,onChange:function(e,n){n&&s(n.key)}})},$=t(52470),z=t.n($),J=t(4300),H=t(87935),Q={fieldGroup:{width:"15rem"}},V=s.ZP.div(m||(m=(0,l.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: end;\n    gap: 10px;\n"]))),X=s.ZP.div(v||(v=(0,l.Z)(["\n    display: flex;\n    flex-direction: row;\n    height: 100%;\n"]))),ee=s.ZP.div(x||(x=(0,l.Z)(["\n    min-width: 20rem;\n    max-width: 20rem;\n    padding: .8rem;\n"]))),ne=0;var te=function(){var e,n,t,r,l=(0,c.useState)("My Awesome Effect"),s=(0,u.Z)(l,2),f=s[0],d=s[1],p=(0,c.useState)(""),b=(0,u.Z)(p,2),y=b[0],g=b[1],h=(0,c.useState)([]),m=(0,u.Z)(h,2),v=m[0],x=m[1],j=(0,c.useState)("rgb[]"),w=(0,u.Z)(j,2),C=w[0],A=w[1],E=(0,c.useState)(0),B=(0,u.Z)(E,2),I=B[0],_=B[1],D=(0,c.useState)([]),M=(0,u.Z)(D,2),N=M[0],G=M[1],U=function(e,n){var t=(0,o.Z)(v);t[n]=e,x(t)};return(0,c.useEffect)((function(){if(!f)return g("// Your effect needs a name");if(!C)return g("// Please pick an output type");if(!v.every((function(e){return"undefined"!==typeof e})))return g("// One of the Inputs needs attention");try{var e=k({effectName:f,inputs:v,output_type:C});g(e)}catch(n){g("Something went wrong: ".concat(n.message))}G(function(e){var t,r=[],a=new Set,o=new Set,u=(0,i.Z)(e);try{for(u.s();!(t=u.n()).done;){var l=t.value;a.has(l.key)&&r.push('keys must be unique but "'.concat(l.key,'" appears more than once')),o.has(l.label)&&r.push('labels must be unique but "'.concat(l.label,'" appears more than once')),o.add(l.label),a.add(l.key)}}catch(n){u.e(n)}finally{u.f()}return r}(v))}),[v,f,C]),(0,R.jsx)("div",{style:{width:"100%",maxWidth:1200,margin:"auto"},children:(0,R.jsxs)(X,{children:[(0,R.jsxs)("div",{style:{marginTop:15,flexGrow:1},children:[(0,R.jsxs)(V,{children:[(0,R.jsx)(Y,{label:"Output Type",onChange:A}),(0,R.jsx)(Z.n,{label:"Name",value:f,onChange:function(e,n){return n&&d(n)},styles:Q})]}),(0,R.jsxs)(V,{style:{justifyContent:"space-between"},children:[(0,R.jsx)("h3",{children:"Inputs"}),(0,R.jsx)(O.a,{style:{alignSelf:"center"},onClick:function(){return x([].concat((0,o.Z)(v),[{type:"rgb",default:[0,0,255],label:"My Color ".concat(ne),key:"input_".concat(ne++)}]))},children:"Add Input"})]}),v.map((function(e,n){return(0,R.jsx)("div",{style:{backgroundColor:n%2===1?"none":"#dddddd",border:"1px black",borderRadius:4},children:(0,R.jsx)(W,{input:e,onChange:function(e){return U(e,n)},onRemove:function(){return function(e){x([].concat((0,o.Z)(v.slice(0,e)),(0,o.Z)(v.slice(e+1))))}(n)},onActivate:function(){return _(n)},onUp:function(){return function(e){if(0!==e){var n=Array.from(v);n.splice(e,1),n.splice(e-1,0,v[e]),x(n)}}(n)},onDown:function(){return function(e){if(e!==v.length-1){var n=Array.from(v);n.splice(e,1),n.splice(e+1,0,v[e]),x(n)}}(n)}})},n)})),N.length>0&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("h3",{style:{color:"red"},children:"Errors:"}),(0,R.jsx)("ul",{children:N.map((function(e,n){return(0,R.jsx)("li",{style:{color:"red"},children:e},n)}))})]}),(0,R.jsxs)(V,{style:{justifyContent:"space-between"},children:[(0,R.jsx)("h3",{children:"Code Template"}),(0,R.jsx)(O.a,{style:{alignSelf:"center"},onClick:function(){return z()(y)},children:"Copy to Clipboard"})]}),(0,R.jsx)(J.Z,{language:"typescript",style:H.Z,showLineNumbers:!0,children:y})]}),(0,R.jsxs)(ee,{children:["rgb"===(null===(e=v[I])||void 0===e?void 0:e.type)&&(0,R.jsx)(S.Yd,{color:null===(n=v[I])||void 0===n?void 0:n.default,onChange:function(e){U((0,a.Z)((0,a.Z)({},v[I]),{},{default:e}),I)}}),"rgb[]"===(null===(t=v[I])||void 0===t?void 0:t.type)&&(0,R.jsx)(S.Ht,{colors:null===(r=v[I])||void 0===r?void 0:r.default,onChange:function(e){U((0,a.Z)((0,a.Z)({},v[I]),{},{default:e}),I)}})]})]})})}},64906:function(e,n){}}]);
//# sourceMappingURL=373.d88f38fb.chunk.js.map