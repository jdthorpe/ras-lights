"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[731],{63660:function(e,n,t){t.d(n,{wZ:function(){return i},r$:function(){return u},HG:function(){return l}});var r=t(18487),a=t(32951),o=t.n(a);function i(){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/lib/");case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/lib/",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/lib/".concat(n),{method:"DELETE",cache:"no-cache"});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},55354:function(e,n,t){t.r(n),t.d(n,{EditorContext:function(){return tn},default:function(){return un},pathEquals:function(){return nn}});var r=t(25571),a=t(18487),o=t(41004),i=t(39917),c=t(78464),u=t(47476),s=t(32951),l=t.n(s),p=t(74812),f=t(72905),d=t(11971),h=t.n(d),x=t(87206),v=t.n(x),g=t(62839),y=t(9812);function m(){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/mode/");case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/mode/",{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/mode/",{method:"DELETE",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z,_,S,E,P,O,T,A=t(55977),I=t(67872),D=t(34878),R=t(10036),N=t(48934),F=t(71876),U=t(23408),W=t(20742),B=t(54329),L=t(22340),J=t(773),K=t(26975),q=t(38639),z=function(e){var n=e.spec,t=e.value,r=e.path,a=(0,p.useContext)(tn),o=(0,p.useCallback)((function(e){a.update_value({value:e},r)}),[a,r]);return(0,q.jsx)(K.Z,{label:n.label,checked:t,onChanged:o})},G=z,V=function(e){var n=e.spec,t=e.value;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(A._,{children:n.label}),(0,q.jsx)(I.a,{children:t.ui.label})]})},H=t(67495),M=f.ZP.div(Z||(Z=(0,u.Z)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: .7rem;\n"]))),$=f.ZP.div(_||(_=(0,u.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: 5px;\n"]))),Y=f.ZP.div.attrs((function(e){return{style:{backgroundColor:e.color}}}))(S||(S=(0,u.Z)(["\n    height: 1.2rem;\n    width: 2rem;\n    border-style: solid;\n    border-width: 1px;\n    border-radius: 2px;\n    border-color: black;\n"]))),Q=(f.ZP.div.attrs((function(e){return{style:{backgroundColor:e.color}}}))(E||(E=(0,u.Z)(["\n    height: 2rem;\n    width: 2rem;\n    border-style: solid;\n    border-width: 1px;\n    border-radius: 2px;\n    border-color: black;\n"]))),function(e){var n=e.color,t=n[3].toString(16);return(0,q.jsxs)($,{children:[(0,q.jsx)(Y,{color:"#".concat(t).concat(t).concat(t)}),(0,q.jsx)(Y,{color:h().rgb.hex(n.slice(0,3))})]})}),X=function(e){var n=e.colors;try{return(0,q.jsx)(M,{children:n.map((function(e,n){var t=e[3].toString(16);return(0,q.jsxs)($,{children:[(0,q.jsx)(Y,{color:"".concat(t).concat(t).concat(t)}),(0,q.jsx)(Y,{color:h().rgb.hex(e.slice(0,3))})]},n)}))})}catch(t){return console.log(t),(0,q.jsx)(q.Fragment,{children:"something went wrong"})}},ee=function(e){var n=e.value,t=e.spec;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(A._,{children:t.label}),(0,q.jsx)(Q,{color:n})]})},ne=function(e){var n=e.value,t=e.spec;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(A._,{children:t.label}),(0,q.jsx)(X,{colors:n})]})},te=t(47102),re=t(20894),ae=t(1430),oe=f.ZP.div(P||(P=(0,u.Z)(["\n    margin: .25rem;\n    box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);\n    width: fit-content;\n    padding: 0.6rem;\n    position: relative;\n"]))),ie=f.ZP.div(O||(O=(0,u.Z)(["\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    align-items: center;\n"]))),ce=f.ZP.div(T||(T=(0,u.Z)(["\n    width: 1rem;\n    padding: 2px;\n    border-radius: 2px;\n    background: grey;\n"]))),ue=function e(n){var t=n.config,r=n.signatures,a=n.path,i=(0,p.useContext)(tn),u=i.get_preview,s=nn(i.active_path,a),l=i.getWrappers(a),f=p.useRef(null),d=p.useRef(null),h=(0,J.Z)(f),x=(0,o.Z)(h,1)[0],v=(0,J.Z)(d),g=(0,o.Z)(v,1)[0],m=p.useRef(null),b=p.useState(!1),w=(0,o.Z)(b,2),j=w[0],k=w[1],C=p.useCallback((function(e){e.preventDefault(),k(!0)}),[]),Z=p.useCallback((function(){return k(!1)}),[]);return(0,q.jsxs)(oe,{ref:f,style:{backgroundColor:s?"#cccccc":"white"},onClick:function(e){e.preventDefault(),e.stopPropagation(),i.set_active_path(a)},children:[(0,q.jsxs)("div",{ref:d,style:{display:"flex",flexDirection:"row",position:"absolute",left:"".concat(x-g-5,"px"),padding:".4rem",gap:".4rem",borderRadius:"2px",backgroundColor:"rgba(255,255,255,0.85)"},children:[l.length>0&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(ce,{ref:m,onClick:C,children:(0,q.jsx)(ae.G,{style:{margin:"auto",display:"block"},icon:y.Cly})}),(0,q.jsx)(re.r,{items:l.map((function(e){return{key:e,text:e,onClick:function(){i.wrap(a,e)}}})),hidden:!j,target:m,onItemClick:Z,onDismiss:Z})]}),(0,q.jsx)(ce,{onClick:function(){i.onClose(a)},children:(0,q.jsx)(ae.G,{style:{margin:"auto",display:"block"},icon:y.NBC})})]}),(0,q.jsxs)(ie,{children:[(0,q.jsxs)("p",{children:[(0,q.jsx)("span",{style:{color:"grey"},children:"func: "})," ",t.name]}),(0,q.jsx)(u,{path:a})]}),(0,q.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:"0.5rem"},children:r[t.name].input.map((function(n,o){var i=t.params[n.key];return"func"===i.type?(0,q.jsxs)("div",{children:[(0,q.jsx)(A._,{children:n.label}),(0,q.jsx)(e,{config:i,path:[].concat((0,c.Z)(a),[o]),signatures:r})]},o):(0,q.jsx)(se,{path:[].concat((0,c.Z)(a),[o]),children:(0,q.jsx)(pe,{config:n,value:i,path:[].concat((0,c.Z)(a),[o])},o)},o)}))})]})},se=function(e){var n=(0,p.useContext)(tn),t=nn(n.active_path,e.path);return(0,q.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation(),n.set_active_path(e.path)},style:{backgroundColor:t?"#cccccc":"transparent",display:"inline-block"},children:e.children})},le=["number","integer"],pe=function(e){var n=e.config,t=e.value,r=e.path;if(!(0,p.useContext)(tn).showNumericInputs&&-1!==le.indexOf(n.type))return null;switch(n.type){case"number":case"integer":return(0,q.jsx)(te.bt,{spec:n,value:t.value,path:r});case"boolean":return(0,q.jsx)(G,{spec:n,value:t.value,path:r});case"rgb":return(0,q.jsx)(H.Dq,{spec:n,value:t.value});case"rgb[]":return(0,q.jsx)(H.pm,{spec:n,value:t.value});case"rgbw":return(0,q.jsx)(ee,{spec:n,value:t.value});case"rgbw[]":return(0,q.jsx)(ne,{spec:n,value:t.value});case"number[]":return(0,q.jsx)(H.Un,{spec:n,value:t.value});case"button":return(0,q.jsx)(V,{spec:n,value:t});default:var a=n;return console.log(a),(0,q.jsx)(q.Fragment,{})}},fe=t(26494),de=(t(46429),t(91440)),he=t(86776),xe=t(21322),ve=t.n(xe),ge={fieldGroup:{width:"15rem"}},ye={dropdown:{width:"10rem"}},me={key:"none",text:"None"};function be(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length,a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*r));return n}var we=function(e){var n,t,a=e.el,i=e.spec,c=e.path,u=e.onChange,s=(0,p.useState)(),l=(0,o.Z)(s,2),f=l[0],d=l[1],h=(0,p.useState)(),x=(0,o.Z)(h,2),v=x[0],g=x[1],y=(0,p.useState)((null===(n=a.ui)||void 0===n?void 0:n.type)||"none"),m=(0,o.Z)(y,2),b=m[0],w=m[1],j=(0,p.useState)((function(){var e;return(null===(e=a.ui)||void 0===e?void 0:e.key)||be(8)})),k=(0,o.Z)(j,2),C=k[0],Z=k[1],_=(0,p.useState)((null===(t=a.ui)||void 0===t?void 0:t.label)||(null===i||void 0===i?void 0:i.label)||""),S=(0,o.Z)(_,2),E=S[0],P=S[1],O=(0,p.useState)([]),T=(0,o.Z)(O,2),A=T[0],I=T[1],D=(0,p.useState)(),R=(0,o.Z)(D,2),N=R[0],F=R[1];return(0,p.useEffect)((function(){if("undefined"!==typeof a&&"undefined"!==typeof i)if(a!==f||i!==v)try{d(a),g(i),I(function(e){switch(e.type){case"rgbw":case"rgbw[]":case"number[]":return[];case"boolean":case"boolean":return[me,{key:"toggle",text:"Toggle"}];case"integer":case"number":return[me,{key:"slider",text:"Slider"}];case"rgb":return[me,{key:"color-picker",text:"Color Picker"}];case"rgb[]":return[me,{key:"color[]-picker",text:"Color Picker"}];case"button":return[{key:"button",text:"Button"}];default:var n=e;return console.log("something went wrong with checker get_ui_options()",n),[]}}(a)),F((0,de.iJ)(i,a)),P(a.ui&&a.ui.label||(null===i||void 0===i?void 0:i.label)||""),Z(a.ui&&a.ui.key||i.key||be(8)),w(a.ui&&a.ui.type||"none")}catch(n){throw console.log("something went wrong when updating from the outside",n),n}else{var e="none"===b?void 0:(0,r.Z)({type:b,label:E,key:C,path:c,default:a.value},N);ve()(e,a.ui)||u(e)}}),[a,i,f,v,b,E,C,N,c,u]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(fe.L,{label:"UI Element",placeholder:"Select UI type",options:A,styles:ye,selectedKey:b,onChange:function(e,n,t){n&&w(n.key)}}),a.ui&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(he.n,{label:"Label",value:a.ui.label||"",onChange:function(e,n){return P(n||"")},styles:ge}),(0,q.jsx)(he.n,{label:"Key",value:a.ui.key||"",onChange:function(e,n){return Z(n||"")},styles:ge})]}),a.ui&&"slider"===a.ui.type&&(0,q.jsx)(de.wq,{el:a,spec:i,onChange:F})]})},je=t(63660),ke=t(59175);function Ce(e,n){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,a.Z)(l().mark((function e(n,r){var a,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.I("default");case 3:return a=window[n],e.next=7,a.init(t.S.default);case 7:return e.next=10,window[n].get(r);case 10:return o=e.sent,i=o(),e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e=function(e){return new Promise((function(n,t){var r=document.createElement("script");r.src=e,r.type="text/javascript",r.async=!0,document.head.appendChild(r),r.onload=function(){n()},r.onerror=function(){console.log("[Script loader] Failed: ".concat(e)),document.head.removeChild(r),t()}}))};function Se(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,a.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e("/lib/".concat(n,"/remoteEntry.js"));case 2:return e.next=4,Ce(n,"./lib");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,a.Z)(l().mark((function e(){var n,t,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,je.wZ)();case 2:n=e.sent,t=(0,i.Z)(n),e.prev=4,t.s();case 6:if((r=t.n()).done){e.next=20;break}return a=r.value,e.next=12,Se(a.name);case 12:e.sent.load(ke.register);case 18:e.next=6;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),t.e(e.t0);case 25:return e.prev=25,t.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,22,25,28]])})))).apply(this,arguments)}var Te=t(93053),Ae=t.n(Te),Ie=t(80818),De=new(Ae()),Re={anyOf:[{type:"array",items:{type:"array",items:{type:"number"},minItems:3,maxItems:4}},{type:"array",items:{type:"number",minimum:0,maximum:255}}]};var Ne,Fe,Ue,We,Be=t(92591),Le=["boolean","number","integer","rgb","rgb[]","button"],Je=["rgb[]","rgbw[]","number[]"],Ke="9be2fa",qe={root:{maxWidth:300}},ze={main:{maxWidth:450}},Ge={type:N.i.normal,title:"Are you sure?",closeButtonAriaLabel:"Close",subText:"Are you sure you want to delete this mode?"},Ve=f.ZP.div(Ne||(Ne=(0,u.Z)(["\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    background-color: #cccccc;\n    padding: 1rem;\n"]))),He=f.ZP.div(Fe||(Fe=(0,u.Z)(["\n    display: flex;\n    flex-direction: row;\n    height: 100%;\n"]))),Me=f.ZP.div(Ue||(Ue=(0,u.Z)(["\n    padding: 1rem;\n    flex-grow: 1;\n"]))),$e=f.ZP.div(We||(We=(0,u.Z)(["\n    min-width: 20rem;\n    max-width: 20rem;\n    background-color: #cccccc;\n    padding: .8rem;\n"]))),Ye=[0,1,2,3,4,5].map((function(e){return h().hsv.rgb([60*e,100,100])})),Qe={type:"rgb[]",value:Ye},Xe={label:"Pixel Colors",key:"nothing",type:"rgb[]",default:Ye};function en(e,n,t){n=(0,c.Z)(n);for(var r=void 0;n.length;){if("func"!==e.type)throw new Error("invalid path");var a=n.shift();r=t[e.name].input[a],e=e.params[r.key]}return[e,r]}function nn(e,n){return e.length===n.length&&e.every((function(e,t){return e===n[t]}))}var tn=(0,p.createContext)({update_value:function(){},set_value:function(){},set_active_path:function(){},get_preview:function(){return(0,q.jsx)("p",{children:"too early"})},active_path:[],onClose:function(){},getWrappers:function(){return[]},wrap:function(){},showNumericInputs:!1}),rn="__free_text__";function an(e,n,t,r){"undefined"===typeof r&&(r=[]);var a,u=(0,i.Z)(n[e.name].input.entries());try{for(u.s();!(a=u.n()).done;){var s=(0,o.Z)(a.value,2),l=s[0],p=s[1],f=e.params[p.key];"func"===f.type?an(f,n,t,[].concat((0,c.Z)(r),[l])):t(f,[].concat((0,c.Z)(r),[l]))}}catch(d){u.e(d)}finally{u.f()}}var on=function(e){var n=e.colors;return n&&null!==n&&0!==n.length?"number"===typeof n[0]?(0,q.jsx)(H.P3,{w:n}):3===n[0].length?(0,q.jsx)(H.B0,{colors:n}):(0,q.jsx)(X,{colors:n}):(0,q.jsx)("p",{children:"too early (no colors)"})},cn=function(e){var n=e.signatures,t=(0,p.useState)([]),i=(0,o.Z)(t,2),u=i[0],s=i[1],f=(0,p.useState)(Qe),d=(0,o.Z)(f,2),h=d[0],x=d[1],b=(0,p.useState)(),j=(0,o.Z)(b,2),C=j[0],Z=j[1],_=(0,p.useState)(),S=(0,o.Z)(_,2),E=S[0],P=S[1],O=(0,p.useState)(!0),T=(0,o.Z)(O,2),N=T[0],J=T[1],K=(0,W.k)(!0),G=(0,o.Z)(K,2),V=G[0],M=G[1].toggle,$=(0,W.k)(!1),Y=(0,o.Z)($,2),ee=Y[0],ne=Y[1].toggle,re=(0,W.k)(!0),ae=(0,o.Z)(re,2),oe=ae[0],ie=ae[1].toggle,ce=(0,p.useState)(!1),se=(0,o.Z)(ce,2),le=se[0],pe=se[1],de=(0,p.useState)(),he=(0,o.Z)(de,2),xe=he[0],ve=he[1],ge=(0,p.useState)(),ye=(0,o.Z)(ge,2),me=ye[0],be=ye[1],je=(0,p.useState)(),ke=(0,o.Z)(je,2),Ce=ke[0],Ze=ke[1],_e=(0,p.useState)(),Se=(0,o.Z)(_e,2),Ee=Se[0],Oe=Se[1],Te=(0,p.useState)([]),Ae=(0,o.Z)(Te,2),Ne=Ae[0],Fe=Ae[1],Ue=(0,p.useState)([]),We=(0,o.Z)(Ue,2),Ye=We[0],nn=We[1],cn=(0,p.useState)((function(){return function(e,n){new Date;var t,a=function(){console.log(">> stop",t),"undefined"!==typeof t&&clearTimeout(t),console.log("cleared ?? ")},o=(0,r.Z)((0,r.Z)({},n),{},{prev:new Array(n.leds).fill([[0,0,0,0]]),stop:a});return{start:function(n){var r=(0,Ie.A)(n,o);return t&&clearTimeout(t),function n(){var a=!1;o.stop=function(){a=!0},new Date;var i=r();new Date;De.validate(Re,i)&&(o.prev=i,e(i),a||(t=setTimeout(n,30)))}(),r},stop:a}}(Z,{leds:8})})),un=(0,o.Z)(cn,1)[0],sn=(0,p.useState)(!0),ln=(0,o.Z)(sn,2),pn=ln[0],fn=ln[1],dn=(0,p.useState)(),hn=(0,o.Z)(dn,2),xn=hn[0],vn=hn[1];(0,p.useEffect)((function(){var e=!1;return(0,a.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Pe();case 3:n.next=10;break;case 5:if(n.prev=5,n.t0=n.catch(0),!e){n.next=9;break}return n.abrupt("return");case 9:vn(n.t0.message||"Something went wrong");case 10:if(n.prev=10,!e){n.next=13;break}return n.abrupt("return");case 13:return fn(!1),n.finish(10);case 15:case"end":return n.stop()}}),n,null,[[0,5,10,15]])})))(),function(){e=!0}}),[]);var gn=(0,p.useCallback)((function(e,t){if(0!==t.length){var r=en(h,t,n)[0],a="func"===r.type?n[r.name].output:r.type,o="func"===e.type?n[e.name].output:e.type;if(a!==o)throw new Error("type of previous value (".concat(a,") is not compatible with new value (").concat(o,")"));var i=v()(h),c=en(i,t.slice(0,t.length-1),n)[0];if(c.params[n[c.name].input[t[t.length-1]].key]=e,console.log("new_show.type",i.type),"func"===i.type){var u=un.start(i);P((function(){return u}))}else un.stop();x(i),s(t)}else if(console.log("setting show to new value",e),x(e),s([]),"func"===e.type){console.log("re-building");try{var l=un.start(e);console.log("........ loop start returned",typeof l,Array.isArray(l)),P((function(){return l}))}catch(p){console.log("bad show:",e),console.log("something went wrong while restarting the loop:",p),un.stop()}}else un.stop()}),[h,x,P,un,n]),yn=xe?[{key:rn,text:xe}].concat((0,c.Z)(Ce)):Ce,mn=(0,p.useCallback)((0,a.Z)(l().mark((function e(){var n,t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:n=e.sent,Ze(n.map((function(e){return{text:e.name,key:e.name}}))),t=n.map((function(e){return[e.name,e.def]})),r=Object.fromEntries(t),Oe(r),J(!1);case 8:case"end":return e.stop()}}),e)}))),[]),bn=(0,p.useRef)({init:mn,loop:un,set:gn});bn.current.init=mn,bn.current.loop=un,bn.current.set=gn,(0,p.useEffect)((function(){bn.current.init(),bn.current.set(Qe,[]);var e=bn.current.loop;return function(){e.stop()}}),[bn]);var wn=!me||!(me===rn?xe:me).length,jn=(0,p.useCallback)((0,a.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=me===rn?xe:me,e.next=3,w({name:n,def:h,ui:Ne});case 3:mn();case 4:case"end":return e.stop()}}),e)}))),[h,xe,me,Ne,mn]),kn=(0,p.useCallback)((0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(me===rn?xe:me);case 2:gn(Qe,[]),mn();case 4:case"end":return e.stop()}}),e)}))),[mn,gn,xe,me]),Cn=(0,p.useCallback)((function(e){var t=[];return an(e,n,(function(e,n){"undefined"!==typeof e.ui&&t.push(e.ui)})),t}),[n]),Zn=(0,p.useCallback)((0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("func"!==h.type){e.next=5;break}return e.next=3,fetch("/api/mode/",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"editor",def:h})});case 3:e.next=11;break;case 5:if(Array.isArray(h.value)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,fetch("/api/mode/off");case 9:return e.next=11,fetch("/api/lights/set-colors",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(h.value)});case 11:case"end":return e.stop()}}),e)}))),[h]),_n=(0,p.useCallback)((function(){pe(!le),le||Zn()}),[le,Zn,pe]);(0,p.useEffect)((function(){le&&Zn(),"func"===h.type&&Fe(Cn(h))}),[h,le,Zn,Fe,Cn]);var Sn=en(h,u,n),En=(0,o.Z)(Sn,2),Pn=En[0],On=En[1];(0,p.useEffect)((function(){if(0===u.length)nn(Object.entries(n).filter((function(e){return-1!==Je.indexOf(e[1].output)})).map((function(e){return e[0]})).sort());else{var e="func"===Pn.type?n[Pn.name].output:Pn.type;nn(Object.entries(n).filter((function(n){return n[1].output===e})).map((function(e){return e[0]})).sort())}}),[u.length,Pn,n]);var Tn=(0,p.useCallback)((function(e){if(0===e.path.length)return(0,q.jsx)(on,{colors:C});var t=function(e,n,t,r){if("func"!==n.type)throw new Error("invalid item type");for(var a,o=t.slice(0,-1);o.length;){if("function"!==typeof e)throw console.log("invalid path (2)"),new Error("invalid path (2)");if("func"!==n.type)throw new Error("This should never happen (the previous error should have taken care of it)");var i=o.shift();a=r[n.name].input[i],n=n.params[a.key],e=Object.getOwnPropertyDescriptor(e.__args__,a.key).get}if("func"!==n.type)throw console.log("invalid path (3)",t,n),new Error("invalid path (3)");return a=r[n.name].input[t[t.length-1]],[e.__args__[a.key],a]}(E,h,e.path,n),r=(0,o.Z)(t,2),a=r[0],i=r[1];switch(i.type){case"button":return(0,q.jsx)(I.a,{children:a});case"boolean":case"number":case"integer":return(0,q.jsx)("p",{children:a});case"rgb":return(0,q.jsx)(H.B0,{colors:[a]});case"rgb[]":return(0,q.jsx)(H.B0,{colors:a});case"rgbw[]":return(0,q.jsx)(X,{colors:a});case"rgbw":return(0,q.jsx)(Q,{color:a});case"number[]":return(0,q.jsx)(H.P3,{w:a});default:var c=i;return console.log(c),(0,q.jsxs)("p",{children:["Unknown input type ",i.type]})}}),[E,n,h,C]),An=(0,p.useCallback)((function(e,t){var a=en(h,t,n)[0];gn((0,r.Z)((0,r.Z)({},a),e),t)}),[h,gn,n]),In=p.useCallback((function(e,n,t,r){var a=null===n||void 0===n?void 0:n.key;!n&&r?(ve(r),be(rn)):(be(a),Ee&&"string"===typeof a&&a!==rn&&gn(Ee[a],[]))}),[Ee,gn]);return N||pn?(0,q.jsx)("div",{style:{marginTop:"2rem"},children:(0,q.jsx)(B.$,{label:"I am totally loading...",size:L.E.large})}):xn?(0,q.jsxs)("div",{children:[(0,q.jsx)("p",{children:"Dang, something went wrong when loading user libraries"}),(0,q.jsx)("p",{style:{color:"red"},children:xn})]}):(0,q.jsxs)(tn.Provider,{value:{set_active_path:s,get_preview:Tn,active_path:u,set_value:gn,update_value:An,onClose:function(e){var t=en(h,e,n)[0],r=n[t.name],a=r.output,o=r.input.filter((function(e){return e.type===a}));if(o.length)gn(t.params[o[0].key],e);else if(0===u.length)gn(Qe,[]);else{var i=en(h,u,n)[1];gn({type:i.type,value:i.default},u)}},getWrappers:function(e){var t=en(h,e,n)[0],r=n[t.name].output;return Object.entries(n).filter((function(e){var n=e[1];return n.output===r&&n.input.filter((function(e){return e.type===r})).length>0})).map((function(e){return e[0]})).sort()},wrap:function(e,t){var r=en(h,e,n)[0],a=n[r.name],o=!0,i={type:"func",name:t,params:Object.fromEntries(n[t].input.map((function(e){return o&&e.type===a.output?(o=!1,[e.key,r]):[e.key,{type:e.type,value:e.default}]})))};console.log("[WRAP] current path",e),console.dir(i),gn(i,e)},showNumericInputs:V},children:[(0,q.jsxs)(Ve,{children:[(0,q.jsx)(A._,{children:"Mode Name"}),(0,q.jsx)(R.C,{allowFreeform:!0,autoComplete:"on",options:yn,styles:qe,selectedKey:me,onChange:In}),(0,q.jsx)("div",{style:{margin:"auto"}}),(0,q.jsx)(g.h,{onClick:_n,title:"Use Live Updates",style:{color:le?Ke:"black"},icon:y.BDt}),(0,q.jsx)(g.h,{onClick:M,title:"Show numeric inputs",style:{color:V?Ke:"black"},icon:y.olY}),(0,q.jsx)(g.h,{onClick:ne,title:"Show raw data",style:{color:ee?Ke:"black"},icon:y.dT$}),(0,q.jsx)(g.h,{onClick:function(){return!wn&&ie()},title:"Delete Show",style:{color:wn?"#dddddd":"black"},icon:y.I7k}),(0,q.jsx)(D.K,{onClick:jn,disabled:wn,children:"Save"})]}),(0,q.jsxs)(He,{children:[(0,q.jsxs)(Me,{children:["func"===h.type?(0,q.jsx)("div",{children:(0,q.jsx)(ue,{config:h,path:[],signatures:n})}):(0,q.jsx)(H.B0,{colors:h.value}),Ne.length>0&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("h3",{style:{marginTop:"2rem"},children:"UI Components"}),(0,q.jsx)(Be.UI,{ui:Ne})]}),ee&&(0,q.jsxs)("div",{children:[(0,q.jsx)(A._,{children:"Raw Data:"}),(0,q.jsx)("pre",{children:JSON.stringify({def:h,ui:Ne},null,4)})]})]}),(0,q.jsxs)($e,{children:[Ye.length>0&&(0,q.jsx)(fe.L,{label:"Input Type",selectedKey:"func"===Pn.type?Pn.name:"constant",onChange:function(e,t){var r,a;if(console.log("A"),t)if(console.log("B",t.key),"constant"===t.key)0===u.length?gn(Qe,[]):gn({type:On.type,value:On.default},u);else{var o=(r=t.key,a=n[t.key],{type:"func",name:r,params:Object.fromEntries(a.input.map((function(e){return[e.key,{type:e.type,value:e.default}]})))});console.log("func C",o,u),gn(o,u)}},placeholder:"Select an option",options:["constant"].concat((0,c.Z)(Ye)).map((function(e){return{key:e,text:e}}))}),"boolean"===Pn.type&&(0,q.jsx)(z,{value:Pn.value,spec:On,path:u}),("number"===Pn.type||"integer"===Pn.type)&&(0,q.jsx)(te.Iv,{value:Pn.value,spec:On,path:u}),"rgb"===Pn.type&&(0,q.jsx)(H.CR,{value:Pn.value,spec:On,path:u}),"rgb[]"===Pn.type&&(0,q.jsx)(H.Kh,{value:Pn.value,spec:0===u.length?Xe:On,path:u}),-1!==Le.indexOf(Pn.type)&&(0,q.jsx)(we,{el:Pn,spec:On,path:u,onChange:function(e){return gn((0,r.Z)((0,r.Z)({},Pn),{},{ui:e}),u)}})]})]}),(0,q.jsx)(F.V,{hidden:oe,onDismiss:ie,dialogContentProps:Ge,modalProps:{isBlocking:!1,styles:ze},children:(0,q.jsxs)(U.c,{children:[(0,q.jsx)(D.K,{onClick:function(){ie(),kn()},text:"Delete"}),(0,q.jsx)(I.a,{onClick:ie,text:"Cancel"})]})})]})},un=function(){var e=(0,p.useState)(),n=(0,o.Z)(e,2),t=n[0],r=n[1];return(0,p.useEffect)((function(){if("undefined"===typeof t){var e=!1;return(0,a.Z)(l().mark((function n(){var t,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("fetching"),n.next=4,fetch("/api/registry/descriptors");case 4:return t=n.sent,n.next=7,t.json();case 7:if(a=n.sent,!e){n.next=10;break}return n.abrupt("return");case 10:r(a),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.log("erroring",n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))(),function(){e=!0}}}),[t]),"undefined"===typeof t?(0,q.jsx)("div",{children:(0,q.jsx)("p",{children:"Loading..."})}):0===Object.keys(t).length?(0,q.jsx)("div",{children:(0,q.jsx)("p",{children:"Something went wrong -- no functions available..."})}):(0,q.jsx)(cn,{signatures:t})}},67495:function(e,n,t){t.d(n,{Dq:function(){return S},Il:function(){return E},CR:function(){return P},Yd:function(){return O},B0:function(){return T},P3:function(){return A},Un:function(){return I},pm:function(){return D},Kh:function(){return R},Ht:function(){return N}});var r,a,o=t(78464),i=t(41004),c=t(47476),u=t(74812),s=t(94827),l=t.n(s),p=t(85362),f=t(42911),d=t(72905),h=t(11971),x=t.n(h),v=t(43245),g=t(55977),y=t(55354),m=t(38639),b=d.ZP.div(r||(r=(0,c.Z)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: .7rem;\n"]))),w="2rem",j="1.1rem",k=d.ZP.div.attrs((function(e){return{style:{backgroundColor:e.color}}}))(a||(a=(0,c.Z)(["\n    height: 2rem;\n    width: 2rem;\n    border-style: solid;\n    border-width: 1px;\n    border-radius: 2px;\n    border-color: black;\n"]))),C=(0,f.y0)({}),Z=(0,f.y0)({fontSize:"1.5rem"}),_={panel:{padding:0,marginTop:12,marginBottom:12},root:{maxWidth:352,minWidth:152},colorRectangle:{height:268}},S=function(e){var n=e.spec,t=e.value;return(0,m.jsxs)("div",{style:{display:"inline-block",margin:"0 .5rem"},children:[(0,m.jsx)(g._,{children:n.label}),(0,m.jsx)(k,{color:"#".concat(x().rgb.hex(t))})]})},E=function(e){var n=e.color;return(0,m.jsx)(k,{color:"#".concat(x().rgb.hex(n))})},P=function(e){var n=e.value,t=e.path,r=e.spec,a=(0,u.useContext)(y.EditorContext),o=(0,y.pathEquals)(a.active_path,t);return(0,m.jsxs)("div",{style:{backgroundColor:o?"#cccccc":"none"},children:[(0,m.jsx)(g._,{children:r.label}),(0,m.jsx)(O,{color:n,onChange:function(e){return a.update_value({value:e},t)}})]})},O=function(e){var n=e.color,t=e.onChange,r=u.useCallback(l()((function(e,n){t([n.r,n.g,n.b])}),50),[t]);return(0,m.jsx)(v.z,{color:"#".concat(x().rgb.hex(n)),onChange:r,alphaType:"none",showPreview:!0,styles:_,strings:{hueAriaLabel:"Hue"}})},T=function(e){var n=e.colors;try{return(0,m.jsx)(b,{children:n.map((function(e,n){return(0,m.jsx)(k,{color:"#".concat(x().rgb.hex(e))},n)}))})}catch(t){return console.log(t),(0,m.jsx)("div",{children:"something went wrong"})}},A=function(e){var n=e.w;return(0,m.jsx)(T,{colors:n.map((function(e){return[e,e,e]}))})},I=function(e){var n=e.value,t=e.spec;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(g._,{children:t.label}),(0,m.jsx)(T,{colors:n.map((function(e){return[e,e,e]}))})]})},D=function(e){var n=e.value,t=e.spec;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(g._,{children:t.label}),(0,m.jsx)(T,{colors:n})]})},R=function(e){var n=e.value,t=e.spec,r=e.path,a=(0,u.useContext)(y.EditorContext),o=(0,y.pathEquals)(a.active_path,r);return(0,m.jsxs)("div",{style:{backgroundColor:o?"#cccccc":"tranparent"},children:[(0,m.jsx)(g._,{children:t.label}),(0,m.jsx)(N,{colors:n,onChange:function(e){return a.update_value({value:e},r)}})]})},N=function(e){var n=e.colors,t=e.onChange,r=(0,u.useState)(0),a=(0,i.Z)(r,2),c=a[0],s=a[1],f=u.useCallback((function(){var e=[].concat((0,o.Z)(n.slice(0,c)),[n[c]],(0,o.Z)(n.slice(c)));t(e),s(c+1)}),[t,n,c]),d=u.useCallback((function(e){var r=[].concat((0,o.Z)(n.slice(0,e)),(0,o.Z)(n.slice(e+1)));t(r),c>e&&s(c-1)}),[t,n,c]),h=u.useCallback(l()((function(e,r){var a=[].concat((0,o.Z)(n.slice(0,c)),[[r.r,r.g,r.b]],(0,o.Z)(n.slice(c+1)));t(a)}),25),[t,n,c]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(b,{children:[n.map((function(e,n){return(0,m.jsxs)("div",{style:{position:"relative"},children:[(0,m.jsx)("div",{style:{height:w,width:w,backgroundColor:"#".concat(x().rgb.hex(e)),borderColor:n===c?"red":"black",borderStyle:"solid",marginTop:n===c?void 0:"1px",borderWidth:n===c?"2px":"1px",borderRadius:"2px"},onClick:function(){return s(n)}}),(0,m.jsx)("div",{style:{position:"absolute",left:"calc(".concat(w," - ").concat(j," / 2)"),top:"-.4rem",borderRadius:"2px",borderWidth:"1px",borderColor:"black",backgroundColor:"#eeeeee",width:j,height:j,padding:"1px",fontSize:"0.9rem"},onClick:function(){return d(n)},children:(0,m.jsx)(p.xu,{"aria-label":"Remove",iconName:"Cancel",className:C,style:{margin:"auto",position:"relative",top:"calc(50% - .75rem)",display:"block",fontSize:"1rem",width:"1rem"}})})]},n)})),(0,m.jsx)("div",{children:(0,m.jsx)("div",{style:{height:w,width:w,backgroundColor:"#eeeeee",borderStyle:"solid",marginTop:"1px",borderWidth:"1px",borderRadius:"2px"},onClick:function(){return f()},children:(0,m.jsx)(p.xu,{"aria-label":"Add",iconName:"Add",className:Z,style:{margin:"auto",position:"relative",top:"calc(50% - .8rem)",display:"block",fontSize:"1.2rem",width:"1.2rem"}})})})]}),(0,m.jsx)(v.z,{color:"#".concat(x().rgb.hex(n[c])),onChange:h,alphaType:"none",showPreview:!0,styles:_,strings:{hueAriaLabel:"Hue"}})]})}},47102:function(e,n,t){t.d(n,{I7:function(){return s},EU:function(){return l},Iv:function(){return p},bt:function(){return f}});var r=t(41004),a=t(74812),o=t(86776),i=t(55354),c=t(38639),u={fieldGroup:{width:"5rem"}},s=/^\d+$/,l=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,p=function(e){var n=e.spec,t=e.value,p=e.path,f=(0,a.useState)(t.toString()),d=(0,r.Z)(f,2),h=d[0],x=d[1],v=n.type,g=n.label,y=n.min,m=n.max,b=(0,a.useState)(),w=(0,r.Z)(b,2),j=w[0],k=w[1],C=(0,a.useContext)(i.EditorContext),Z=(0,a.useCallback)((function(e,n){return x(n),"undefined"===typeof n?(C.update_value({value:y},p),void k("Required")):"integer"!==v||s.test(n)?"number"!==v||l.test(n)?+n<y?k("Value must be at least ".concat(y)):+n>m?k("Value must be at most ".concat(m)):(C.update_value({value:+n},p),void k(void 0)):k("Value must be a number"):k("Value must be an integer")}),[y,m,v,C,p]);return(0,c.jsx)("div",{style:{display:"inline-block",margin:".5rem"},children:(0,c.jsx)(o.n,{label:g,value:h,onChange:Z,styles:u,errorMessage:j})})},f=p},92591:function(e,n,t){t.d(n,{UI:function(){return j}});var r,a,o=t(41004),i=t(47476),c=t(74812),u=t(72905),s=t(67872),l=t(40408),p=t(38639),f=function(e){var n=e.ui;return(0,p.jsx)(s.a,{onClick:function(){return(0,l._)(n.key,!0)},children:n.label})},d=t(26975),h=function(e){var n=e.ui;return(0,p.jsx)(d.Z,{label:n.label,onChange:function(e,t){"undefined"!==typeof t&&(0,l._)(n.key,t)}})},x=t(91440),v=t(67495),g=t(55977),y=function(e){var n=e.ui,t=(0,c.useState)(n.default),r=(0,o.Z)(t,2),a=r[0],i=r[1],u=(0,c.useState)(n),s=(0,o.Z)(u,2),f=s[0],d=s[1];(0,c.useEffect)((function(){Object.is(n,f)||(d(n),i(n.default))}),[n,f]);var h=(0,c.useContext)(l.m),x=(0,c.useCallback)((function(e){e.stopPropagation(),h.setPreview((function(){return function(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(v.Yd,{color:a,onChange:function(e){(0,l._)(n.key,e),i(e)}})})}}))}),[n,a,h]);return(0,p.jsxs)("div",{onClick:x,children:[(0,p.jsx)(g._,{children:n.label}),(0,p.jsx)(v.Il,{color:a})]})},m=function(e){var n=e.ui,t=(0,c.useState)(n.default),r=(0,o.Z)(t,2),a=r[0],i=r[1],u=(0,c.useCallback)((function(e){(0,l._)(n.key,e),i(e)}),[i,n.key]),s=(0,c.useContext)(l.m),f=(0,c.useCallback)((function(){s.setPreview((function(){return function(){return(0,p.jsx)(v.Ht,{colors:a,onChange:u})}}))}),[a,s,u]);return(0,p.jsxs)("div",{onClick:f,children:[(0,p.jsx)(g._,{children:n.label}),(0,p.jsx)(v.B0,{colors:n.default})]})},b=u.ZP.div(r||(r=(0,i.Z)(["\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    heigth:100%;\n"]))),w=u.ZP.div(a||(a=(0,i.Z)(["\n    min-width: 20rem;\n    max-width: 20rem;\n    padding: .8rem;\n"]))),j=function(e){var n=e.ui,t=(0,c.useState)(null),r=(0,o.Z)(t,2),a=r[0],i=r[1];return(0,p.jsx)(l.m.Provider,{value:{setPreview:function(e){i(e)},clear:function(){return i(null)}},children:(0,p.jsxs)(b,{children:[n.map((function(e,n){return(0,p.jsx)("div",{style:{margin:10},onClick:function(){i(null)},children:(0,p.jsx)(k,{ui:e})},n)})),(0,p.jsx)(w,{children:a&&(0,p.jsx)(a,{})})]})})},k=function(e){var n=e.ui,t=n.type;switch(t){case"button":return(0,p.jsx)(f,{ui:n});case"color-picker":return(0,p.jsx)(y,{ui:n});case"color[]-picker":return(0,p.jsx)(m,{ui:n});case"slider":return(0,p.jsx)(x.a,{ui:n});case"toggle":return(0,p.jsx)(h,{ui:n});default:var r=t;return console.log(r),(0,p.jsxs)("p",{children:['Unknown ui type "',t,'"']})}}},91440:function(e,n,t){t.d(n,{a:function(){return p},iJ:function(){return f},wq:function(){return d}});var r=t(41004),a=t(74812),o=t(94827),i=t.n(o),c=t(55977),u=t(49644),s=t(40408),l=t(38639),p=function(e){var n=e.ui,t=a.useCallback(i()((function(e){(0,s._)(n.key,e)}),25),[n]);return(0,l.jsxs)("div",{style:{minWidth:200,maxWidth:300},children:[(0,l.jsx)(c._,{children:n.label}),(0,l.jsx)(u.i,{min:n.min,max:n.max,defaultValue:n.default,showValue:!1,onChange:t})]})};function f(e,n){if("number"===e.type||"integer"===e.type){var t=n.ui;return{max:t&&"undefined"!==typeof t.max?t.max:e.max,min:t&&"undefined"!==typeof t.min?t.min:e.min}}return{}}var d=function(e){var n=e.el,t=e.spec,o=e.onChange,i=(0,a.useState)(),c=(0,r.Z)(i,2),s=c[0],p=c[1],f=(0,a.useState)(),d=(0,r.Z)(f,2),h=d[0],x=d[1];return(0,a.useEffect)((function(){n===s&&t===h||(p(n),x(t))}),[n,t,s,h]),(0,l.jsx)(u.i,{ranged:!0,label:"Input Range",min:t.min,max:t.max,value:n.ui&&"undefined"!==typeof n.ui.max?n.ui.max:t.max,lowerValue:n.ui&&"undefined"!==typeof n.ui.min?n.ui.min:t.min,onChange:function(e,n){n&&o({min:n[0],max:n[1]})}})}},40408:function(e,n,t){t.d(n,{_:function(){return i},m:function(){return u}});var r=t(18487),a=t(32951),o=t.n(a);function i(e,n){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(o().mark((function e(n,t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object.fromEntries([[n,t]]),e.next=4,fetch("/api/ctl/",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("/api/ctl/ failed with error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var u=(0,t(74812).createContext)({setPreview:function(e){},clear:function(){return function(){return null}}})},62839:function(e,n,t){t.d(n,{h:function(){return l}});var r,a=t(25571),o=t(47476),i=(t(74812),t(72905)),c=t(1430),u=t(38639),s=i.ZP.div(r||(r=(0,o.Z)(["\n    width: 2rem;\n    height: 2rem;\n    font-size: 1.2rem;\n    border-radius: 2px;\n    background: grey;\n    padding-top: 0.4rem;\n"]))),l=function(e){var n=e.icon,t=e.title,r=e.onClick,o=e.style,i=e.buttonStyle,l=e.iconStyle;return(0,u.jsx)(s,{onClick:r,style:(0,a.Z)((0,a.Z)({},o),i),children:(0,u.jsx)(c.G,{title:t,style:(0,a.Z)((0,a.Z)({margin:"auto",display:"block"},o),l),icon:n})})}},80818:function(e,n,t){var r=t(50741).default,a=t(94861).default;n.A=void 0;var o=t(59175);function i(e,n,t){console.log("[_build_node] got config: ",e);var c=o.registry[e.name];if("undefined"===typeof c)throw console.log("throwing"),new Error("Unknown function ".concat(e.name,". Known functions include: ").concat(Object.keys(o.registry).reduce((function(e,n){return""===e?n:"".concat(e,", ").concat(n)}),"")));var u=a(c,3),s=u[0],l=u[1],p=u[2];if(Array.isArray(n)){if(-1===n.indexOf(p))throw new Error('Expected return type in "'.concat(n,'" but registry function ').concat(e.name," returns ").concat(p))}else if(n!==p)throw new Error('Expected return type "'.concat(n,'" but registry function ').concat(e.name," returns ").concat(p));var f,d,h={},x=r(l);try{for(x.s();!(f=x.n()).done;){var v=f.value,g=e.params[v.key];if("undefined"===typeof g)throw new Error("missing input parameter ${param.key}");switch(g.type){case"func":var y=i(g,v.type,t);Object.defineProperty(h,v.key,{get:y});break;case"number":switch(v.type){case"integer":case"number":h[v.key]=g.value;break;default:throw new Error("Parameter type ".concat(g.type," is not compatible with input type ").concat(v.type))}break;case"boolean":case"integer":case"button":case"number[]":case"rgbw":case"rgbw[]":case"rgb":case"rgb[]":if(v.type!==g.type)throw new Error("Parameter type ".concat(g.type," is not compatible with input type ").concat(v.type));h[v.key]=g.value;break;default:var m=g;throw console.log("exhaustivenessCheck",m),new Error("unknown input type ".concat(g.type))}}}catch(b){x.e(b)}finally{x.f()}return(d=0===s.length?s.bind({}):1===s.length?s.bind({},h):s.bind({},h,t)).__args__=h,d}n.A=function(e,n){return i(e,["rgb[]","rgbw[]","number[]"],n)}},59175:function(e,n,t){var r=t(94861).default;Object.defineProperty(n,"__esModule",{value:!0}),n.get_descriptors=n.register=n.setActiveLibrary=n.registry=void 0;var a=["manual","none"];n.registry={};var o=void 0;n.setActiveLibrary=function(e){o=e},n.register=function(e){var t=e.name,r=e.func,i=e.input,c=e.output;if(-1!==a.indexOf(t))throw new Error("Reserved name ".concat(t));console.log("REGISTER: adding function (".concat(Object.keys(n.registry).length,") ").concat(o||"internal","/").concat(t)),t in n.registry&&console.log("WARNING: overwriting existing registry function ".concat(t)),n.registry[t]=[r,i,c]},n.get_descriptors=function(){for(var e={},t=0,a=Object.entries(n.registry);t<a.length;t++){var o=r(a[t],2),i=o[0],c=o[1];e[i]={input:c[1],output:c[2]}}return e}},46429:function(e,n){}}]);
//# sourceMappingURL=731.fbee5340.chunk.js.map