"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[199],{37199:function(e,n,t){t.r(n);var r=t(78464),a=t(25571),u=t(18487),i=t(41004),s=t(32951),o=t.n(s),c=t(74812),f=t(26494),l=t(92591),d=t(38639),p={dropdown:{width:300}};n.default=function(){var e=(0,c.useState)([]),n=(0,i.Z)(e,2),t=n[0],s=n[1],h=(0,c.useState)(),x=(0,i.Z)(h,2),b=x[0],k=x[1],m=(0,c.useState)(),g=(0,i.Z)(m,2),v=g[0],y=g[1],w=(0,c.useState)(),Z=(0,i.Z)(w,2),j=Z[0],S=Z[1];(0,c.useEffect)((function(){var e=!1;return(0,u.Z)(o().mark((function n(){var t,u,c,f,l,d,p,h,x,b;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"!==typeof v){n.next=32;break}return n.next=3,fetch("/ras-lights/api/mode/",{method:"GET",cache:"no-cache"});case 3:if(t=n.sent,!e){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,fetch("/ras-lights/api/ctl/");case 8:if(u=n.sent,!e){n.next=11;break}return n.abrupt("return");case 11:return n.prev=11,n.next=14,u.json();case 14:if(c=n.sent,!e){n.next=17;break}return n.abrupt("return");case 17:return n.next=19,t.json();case 19:if(f=n.sent,!e){n.next=22;break}return n.abrupt("return");case 22:if(y(f),l=f.map((function(e){return{key:e.name,text:e.name}})),s(l),"string"===typeof c.mode)if((d=f.findIndex((function(e){return e.name===c.mode})))>=0){if((p=(0,a.Z)({},f[d])).ui)for(p.ui=(0,r.Z)(p.ui),h=function(){var e=(0,i.Z)(b[x],2),n=e[0],t=e[1],r=p.ui.findIndex((function(e){return e.key===n}));void 0!==typeof r&&(p.ui[r]=(0,a.Z)((0,a.Z)({},p.ui[r]),{},{default:t}))},x=0,b=Object.entries(c.updates);x<b.length;x++)h();S(p),k(l[d].key)}else console.log("unknown mode ".concat(c.mode));n.next=32;break;case 28:n.prev=28,n.t0=n.catch(11),console.log('fetch("/ras-lights/api/mode/").json() failed with',n.t0),console.log("This usually means the app is running on a dev box without beign proxied via /nginx-dev.conf");case 32:case"end":return n.stop()}}),n,null,[[11,28]])})))(),function(){e=!0}}),[v,y]);var C=(0,c.useCallback)(function(){var e=(0,u.Z)(o().mark((function e(n,t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v&&t&&"number"===typeof r&&(fetch("/ras-lights/api/mode/".concat(t.key)),S(v[r]),k(t.key));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[v]);return(0,d.jsxs)("div",{style:{margin:"1.5rem"},children:[(0,d.jsx)(f.L,{placeholder:"Select a Light Mode",label:"Light Mode",selectedKey:b,options:t,styles:p,onChange:C}),j&&j.ui&&(0,d.jsx)(l.UI,{ui:j.ui})]})}}}]);
//# sourceMappingURL=199.ace9f30f.chunk.js.map